<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width">

    <title>Add a Role </title>

    <link rel="stylesheet" href="">
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!-- Bootstrap libraries -->
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">


    <!-- Bootstrap CSS -->
    <link href='https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css'
        rel='stylesheet'
        integrity='sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC'
        crossorigin='anonymous'>

    <!-- Latest compiled and minified JavaScript -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/1.0.18/vue.min.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
</head>

<body>
    <div id="main-container" class="container">
    <h1 class="display-4">Add a role</h1>
    <form id='addRoleForm' method="POST">
        <h2>Job Role Name</h2>
        <div class="form-group">
            <input type="text" class="form-control" name="name" id="name" v-model="name">
        </div>

        <h2>Job Description</h2>
        <div class="form-group">
            <input type="text" class="form-control" name="description" id="description" v-model="description">
        </div>

        <button id="addRoleBtn" class="btn btn-primary" v-on:click="submitForm">Create Job Role</button>
        <p><label id="error" class="text-danger">{{ error }}</label></p>
    </form>

    <p>
        <em><strong>Job Roles:</strong> <a href="Roles.html">View Job Roles</a></em>
    </p>
    </div>  

    <script >
        const vm = new Vue({
            el: '#main-container',
            data: {
                name: '',
                description: '',
                error: ''
            },
            methods: {
                submitForm: function(item) {
                var name = this.name;
                var description = this.description;
                event.preventDefault();
                axios.post('http://localhost:5010/roles/add_role', {
                        name: name,
                        description: description
                    })
                .then(response => {
                        console.log(response.data)
                        window.location.replace("./Roles.html");
                        return false;
                    })
                .catch(error => { this.error = error.response.data.message });
                }
            }
            // mounted: function() {
            //     axios.get('http://localhost:5010/roles')
            //         .then(response => {
            //             console.log(response.data);
            //         })
            //         .catch(error => alert(error));
            // }
        });
    </script>
</body>

</html>